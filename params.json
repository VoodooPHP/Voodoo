{"name":"Voodoo","tagline":"","body":"\r\n# Voodoo 1.x.x\r\n\r\n#### A Simple, Easy, Intuitive PHP Framework for Those Who Keep It Simple\r\n\r\n---\r\n\r\nName: Voodoo\r\n\r\nLicense: MIT\r\n\r\nDesign: Modular MVC\r\n\r\nRequirements: PHP 5.4\r\n\r\nCompliance: PSR-2\r\n\r\nAuthor: [Mardix](http://github.com/mardix)\r\n\r\nCopyright: This Year - Mardix\r\n\r\n[VoodooPHP.org](http://voodoophp.org)\r\n\r\n[Forums](https://groups.google.com/d/forum/voodoophp/)\r\n\r\n*This is an overview of Voodoo, please go to [VoodooPHP.org](http://voodoophp.org) for a complete documentation of the framework*\r\n\r\n---\r\n\r\n## About Voodoo!\r\n\r\n\r\nVoodoo is Modular MVC framework written in PHP. Its main goal is to ensure separation of concerns by keeping your code organized and avoid mixing database calls, HTML tags and business logic in the same script.\r\n\r\nVoodoo, first, organize your application into subset of MVC structure which are independent from other one. These subsets are called Modules. Modules can be an admin section, the main site, intranet, or can be used for A/B testing.\r\n\r\nModules improve maintainability by enforcing logical boundaries between components. By being Modular, Voodoo allows developers/designers to work on individual module at the same time, thus making development of program faster. New features or new sections can be implemented quickly without changing other sections. And when it's no longer needed, the module can be deleted and everything is still gravy.\r\n\r\n---\r\n### Features Highlight\r\n\r\n\r\n- Slim\r\n- RESTful\r\n- API ready\r\n- MVC\r\n- Shared Application\r\n- Modular MVC\r\n- Namespaced\r\n- PSR compliant\r\n- Front Controller\r\n- Templates\r\n- Mustache Template\r\n- Smart Routing\r\n- [VoodOrm](https://github.com/mardix/VoodOrm)\r\n- Annotation\r\n- [Paginator](https://github.com/mardix/Paginator)\r\n- Bootstrap CSS/JS framework\r\n- HTTP Request\r\n- Voodooist (generate code on the fly)\r\n\r\n\r\n---\r\n## Install Voodoo with Composer\r\n\r\nTo install Voodoo, create or edit the **composer.json** file, and add the code below in the 'require':\r\n\r\n\t\"voodoophp/voodoo\": \"1.*\"\r\n\r\nYour composer.json file should look something similar to this:\r\n\r\n\t{\r\n\t    \"name\": \"voodoophp/myapp\",\r\n\t    \"description\": \"My awesome Voodoo App\",\r\n\t    \"require\": {\r\n\t        \"voodoophp/voodoo\": \"1.*\"\r\n\t    }\r\n\t}\r\n\r\nthen run the command below to download Voodoo and its dependencies\r\n\r\n\tcomposer install\r\n\r\nAssuming that your composer installed the packages in your `/vendor` directory, you should see at least the following when you go inside of /vendor\r\n\r\n\t\t|\r\n\t\t+-- composer.json\r\n\t\t|\r\n\t\t+-- vendor/\r\n\t\t\t|\r\n\t\t\t+-- composer/\r\n\t\t\t|\r\n\t\t\t+-- voodoophp/\r\n\r\n---\r\n\r\n## Setup & Filesystem\r\n\r\nNow the Voodoo is installed, it's time to set it up so it creates the directories for your applications. \r\n\r\nAssuming that composer installed packages in your `/vendor` directory, the Voodoo framework will be in: `/vendor/voodoophp/voodoo` \r\n\r\nEnter the command below\r\n\r\n\tcd vendor/voodoophp/voodoo/src/Voodoo/Voodooist\r\n\tphp ./setup.php\r\n\r\nOnce the setup is done, you should have a filesystem similar to this:\r\n\r\n\t|\r\n\t+-- App/\r\n\t\t|\r\n\t\t+-- .htaccess\r\n\t\t|\r\n\t\t+-- Conf/\t\t\t\r\n\t\t|\r\n\t\t+-- Www/\r\n\t\t\t|\r\n\t\t\t+-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main/\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n\t\t\t\t|\r\n\t\t\t\t+-- Model/\r\n\t\t\t\t|\r\n\t\t\t\t+-- Views/\r\n\t|\r\n\t+-- assets/\r\n\t\t|\r\n\t\t+-- bootstrap/\r\n\t\t|\r\n\t\t+-- css/\r\n\t\t|\r\n\t\t+-- img/\r\n\t\t|\r\n\t\t+-- js/\r\n\t\t|\r\n\t\t+-- jquery/\r\n\t|\r\n\t+-- vendor\r\n\t\t\t|\r\n\t\t\t+-- composer/\r\n\t\t\t|\r\n\t\t\t+-- voodoophp/\r\n\t|\r\n\t+-- composer.json\r\n\t|\r\n\t+-- .htaccess\r\n\t|\r\n\t+-- index.php\r\n\t|\r\n\t+-- robots.txt\r\n\r\n**/App** : Contains your application's Modular MVC\r\n\r\n**/App/Conf** : Contains the configurations, ie: DB.ini for database settings, System.ini for system wide settings, app.json your application schema to create your MVC files on the fly.\r\n\r\n**/App/Www**: That's your default application which contains your MVC files. When someone accesses your application that's where he/she will land, unless you change it to another application. You can also have */App/Site1*, */App/Site2*, */App/Api* and so on to create multi applications which share the same Voodoo code base.\r\n\r\n**/assets/**: That's your application shared assets. For your convenience, we added Bootstrap and JQuery.\r\n\r\n**/vendor/**: Where composer installed the packages\r\n\r\n**/composer.json**: The composer file\r\n\r\n**/index.php**: The front-controller file which redirect everything to Voodoo to do its magic!\r\n\r\n---\r\n\r\n## The Voodooist \r\n\r\nThe Voodooist is our servant, it will help us create directories and files properly namespaced per PSR-0 in our Voodoo application. \r\n\r\nOnce our application has been setup, Voodooist requires: /App/Conf/app.json and /App/voodooist.php. These files were created during the initial setup.\r\n\r\n\r\n#### - App/Conf/app.json\r\n\r\n**App/Conf/app.json** is a JSON file that contains the layout of your application, including modules, controllers, controller's action etc. It is ran by Voodooist to setup your application. Below is a  basic **app.json**\r\n\r\n\t{\r\n\t    \"createPublicAssets\" : true,\r\n\t    \"applications\" : [\r\n\t        {\r\n\t            \"name\" : \"www\",\r\n\t            \"modules\" : [\r\n\t                {\r\n\t                    \"name\" : \"Main\",\r\n\t                    \"template\" : \"Default\",\r\n\t                    \"isApi\" : false,\r\n\t                    \"omitViews\" : false,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"login\", \"logout\", \"about-us\"]\r\n\t                        },\r\n\t                        {\r\n\t                            \"name\" : \"Account\",\r\n\t                            \"actions\" : [\"index\", \"info\", \"preferences\"]\r\n\t                        }\r\n\t                    ],\r\n\r\n\t                    \"models\" : [\r\n\t                        {\r\n\t                            \"name\" : \"User\",\r\n\t                            \"dbAlias\" : \"MyDB\",\r\n\t                            \"table\" : \"user\",\r\n\t                            \"primaryKey\" : \"id\",\r\n\t                            \"foreignKey\" : \"%s_id\"\r\n\t                        },\r\n\t                        {\r\n\t                            \"name\" : \"User/Preference\",\r\n\t                            \"dbAlias\" : \"MyDB\",\r\n\t                            \"table\" : \"user_preference\",\r\n\t                            \"primaryKey\" : \"id\",\r\n\t                            \"foreignKey\" : \"%s_id\"\r\n\t                        }\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        }            \r\n\t    ]\r\n\t} \r\n\r\n#### - /App/Voodoist.php\r\n\r\nOnce Voodoo is setup, you won't need to go the `/vendor/voodoophp/voodoo/src/Voodoo/Voodooist/setup.php` to create your application's files. Voodoo created `/App/voodooist.php` to serve the same purpose. You will need it to create your application's files on the fly based on your /App/Conf/app.json. All files will be properly namespaced per PSR-0, and placed inside of /App under their respective application.\r\n\r\nRunning the code below, will execute the `/App/Conf/app.json` set above:\r\n\r\n\tcd /App\r\n\tphp ./voodooist.php\r\n\r\nUpon execution of /App/voodooist.php you will should see a filesystem similar to this:\r\n\r\n\t|\r\n\t+-- App/\r\n\t\t|\r\n\t\t+-- .htaccess\r\n\t\t|\r\n\t\t+-- Www\r\n            |\r\n            +-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n                    |\r\n                    +-- BaseController.php (extends Voodoo\\Core\\Controller)\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionLogin()\r\n\t\t\t\t\t\t\t::actionLogout()\r\n\t\t\t\t\t\t\t::actionAboutUs()\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Account.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionInfo()\r\n\t\t\t\t\t\t\t::actionPreferences()\r\n\t\t\t\t|\r\n\t\t\t\t+-- Model/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- User.php\r\n                    |\r\n                    +-- User/Preference.php\r\n\t\t\t\t|\r\n\t\t\t\t+-- Views/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Login.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Logout.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- AboutUs.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Account/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Info.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Preferences.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- js/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- css/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- img/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- flash-message.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- pagination.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- default.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- head-tag.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- footer.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- header.html\r\n\t|\r\n\t+-- assets/ [+]\r\n\t|\r\n\t+-- vendor/ [+]\r\n\t|\r\n\t+-- index.php\r\n\t|\r\n\t+-- .htaccess\r\n\r\n\r\n### Application (Multi-Applications)\r\n\r\nApplication is the upper level of your program. Everything must be in an application. An application can be another site sharing the same Voodoo code base of other application. Hence making Voodoo multi-sites , multi-applications ready.\r\n\r\n You can have *Site1.com*, *Site2.com*, *SiteX.com* all under the same environment sharing the same front controller, same Voodoo code base. And since your application is namespaced PSR-0, it's easy to re-use code from other applications.\r\n\r\nInside of each applications are the applications modules. By default Voodoo creates the **WWW** which is the default entry point of your site. In large, Applications are sets of Modules. A more advance app.json looks like that with three applications: *Www, AnotherApp, Api*\r\n\r\n/App/Conf/app.json\r\n\r\n\t{\r\n\t    \"createPublicAssets\" : true,\r\n\t    \"applications\" : [\r\n\t        {\r\n\t            \"name\" : \"www\",\r\n\t            \"modules\" : [\r\n\t                {\r\n\t                    \"name\" : \"Main\",\r\n\t                    \"template\" : \"Default\",\r\n\t                    \"isApi\" : false,\r\n\t                    \"omitViews\" : false,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"login\", \"logout\", \"about-us\"]\r\n\t                        },\r\n\t                        {\r\n\t                            \"name\" : \"Account\",\r\n\t                            \"actions\" : [\"index\", \"info\", \"preferences\"]\r\n\t                        }\r\n\t                    ],\r\n\r\n\t                    \"models\" : [\r\n\t                        {\r\n\t                            \"name\" : \"User\",\r\n\t                            \"dbAlias\" : \"MyDB\",\r\n\t                            \"table\" : \"user\",\r\n\t                            \"primaryKey\" : \"id\",\r\n\t                            \"foreignKey\" : \"%s_id\"\r\n\t                        },\r\n\t                        {\r\n\t                            \"name\" : \"User/Preference\",\r\n\t                            \"dbAlias\" : \"MyDB\",\r\n\t                            \"table\" : \"user_preference\",\r\n\t                            \"primaryKey\" : \"id\",\r\n\t                            \"foreignKey\" : \"%s_id\"\r\n\t                        }\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            \"name\" : \"AnotherApp\",\r\n\t            \"modules\" : [\r\n\t                {\r\n\t                    \"name\" : \"Main\",\r\n\t                    \"template\" : \"Default\",\r\n\t                    \"isApi\" : false,\r\n\t                    \"omitViews\" : false,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"info\"]\r\n\t                        }\r\n\t                    ]\r\n\t                },\r\n\t                {\r\n\t                    \"name\" : \"Admin\",\r\n\t                    \"template\" : \"Default\",\r\n\t                    \"isApi\" : false,\r\n\t                    \"omitViews\" : false,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"login\"]\r\n\t                        }\r\n\t                    ]\r\n\t                }                    \r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            \"name\" : \"Api\",\r\n\t            \"modules\" : [\r\n\t                {\r\n\t                    \"name\" : \"Main\",\r\n\t                    \"template\" : \"\",\r\n\t                    \"isApi\" : true,\r\n\t                    \"omitViews\" : true,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"status\"]\r\n\t                        }\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        }             \r\n\t    ]\r\n\t} \r\n\r\nAfter running /App/voodooist.php you will get the following structure\r\n\r\n\t|\r\n\t+-- App/\r\n\t\t|\r\n\t\t+-- .htaccess\r\n\t\t|\r\n\t\t+-- Www\r\n            |\r\n            +-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n                    |\r\n                    +-- BaseController.php (extends Voodoo\\Core\\Controller)\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionLogin()\r\n\t\t\t\t\t\t\t::actionLogout()\r\n\t\t\t\t\t\t\t::actionAboutUs()\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Account.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionInfo()\r\n\t\t\t\t\t\t\t::actionPreferences()\r\n\t\t\t\t|\r\n\t\t\t\t+-- Model/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- User.php\r\n                    |\r\n                    +-- User/Preference.php\r\n\t\t\t\t|\r\n\t\t\t\t+-- Views/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Login.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Logout.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- AboutUs.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Account/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Info.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Preferences.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- js/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- css/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- img/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- flash-message.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- pagination.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- default.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- head-tag.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- footer.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- header.html\r\n\t\t|\r\n\t\t+-- AnotherApp\r\n            |\r\n            +-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n                    |\r\n                    +-- BaseController.php (extends Voodoo\\Core\\Controller)\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionInfo()\r\n\t\t\t\t|\r\n\t\t\t\t+-- Views/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Info.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/[+]\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/ [+]\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/ [+]\r\n\t\t\t|\r\n\t\t\t+-- Admin\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n                    |\r\n                    +-- BaseController.php (extends Voodoo\\Core\\Controller)\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionLogin()\r\n\t\t\t\t|\r\n\t\t\t\t+-- Views/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Login.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/[+]\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/ [+]\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/ [+]\r\n\t\t|\r\n\t\t+-- Api\r\n            |\r\n            +-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n                    |\r\n                    +-- BaseController.php (extends Voodoo\\Core\\Controller\\Api)\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php (extends BaseController)\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionStatus()\r\n\t|\r\n\t+-- assets/ [+]\r\n\t|\r\n\t+-- vendor/ [+]\r\n\t|\r\n\t+-- index.php\r\n\t|\r\n\t+-- .htaccess\r\n\r\n\r\n\r\n### Modules\r\n\r\nModules are the second level of your application. Application are sets of Modules and Modules are set of MVC application.\r\n\r\nEach module contains one set of MVC. By default Voodoo will fall back to `Main` module if a module is not specified.\r\n\r\nThat's how the module **Main** looks like in the **Www** application.\r\n\r\n\t|\r\n\t+-- App/\r\n\t\t|\r\n\t\t+-- .htaccess\r\n\t\t|\r\n\t\t+-- Www\r\n\t\t\t|\r\n\t\t\t+-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionAbout()\r\n\t\t\t\t|\r\n\t\t\t\t+-- Model/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- MySampleModel.php\r\n\t\t\t\t|\r\n\t\t\t\t+-- View/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- About.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- js/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- css/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- img/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- flash-message.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- pagination.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- default.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- head-tag.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- footer.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- header.html\r\n\t|\r\n\t+-- assets/ [+]\r\n\t|\r\n\t+-- vendor/ [+]\r\n\t|\r\n\t+-- index.php\r\n\t|\r\n\t+-- .htaccess\r\n\r\nAll classes are namespaced per PSR-0. So the main namespace for Www/Main are as follow:\r\n\r\n\tApp\\Www\\Main\r\n\tApp\\Www\\Main\\Controller\r\n\tApp\\Www\\Main\\Controller\\Index\r\n\tApp\\Www\\Main\\Model\r\n\tApp\\Www\\Main\\Model\\MySampleModel\r\n\r\nSubstitute `Www` for any other application name you would have the same structure.\r\n\r\n\r\n#### What can modules be used for?\r\n\r\nModules can be other sections of your site separated from the main site, let's say `App\\Www\\Admin` for an admin section or `App\\Www\\Api` to serve an API. It can be anything you want it. It can be used for A/B testing... etc...\r\n\r\n\r\n\r\n---\r\n\r\nNow you understand how Voodoo is structured let's get to know about how everything works\r\n\r\n---\r\n\r\n## Front-Controller: /index.php\r\n\r\nAt the root of your application there is the **index.php**. Its job, as a front-controller, is to encapsulate the typical request/route/dispatch/response for the Voodoo application, by invoking  `Voodoo\\Core\\Application` \r\n\r\n/index.php\r\n\r\n\t<?php\r\n\r\n\trequire_once __DIR__.\"/App/bootstrap.php\";\r\n\r\n    /**\r\n     * Set the application name to use. By default it's Www\r\n     * @type string\r\n     */\r\n    $appName = \"www\";\r\n\r\n    (new Voodoo\\Core\\Application(APP_ROOT_DIR, $appName))->doVoodoo();\r\n\r\n\r\nEverythings comes here first then go to where they need to be\r\n\r\n\r\n### Front-Controller serving multiple application based on URL\r\n\r\nThe example below illustrates how you can have multi-sites using the same code base. \r\n\r\nBased on the hostname, each site will use a different application directory. You will have to point all the domains to the same IP address for it to work.  \r\n\r\nLet's use the /App/Conf/app.json above for our multi-sites\r\n\r\n/index.php\r\n\r\n\t<?php\r\n\r\n\trequire_once __DIR__.\"/App/bootstrap.php\";\r\n\r\n    $hostName = Voodoo\\Core\\Env::getHostName();\r\n    switch($hostName) {\r\n        case \"api.mysite.com\" :\r\n            $appName = \"Api\";\r\n            break;\r\n        case \"crazyapps.com\" :\r\n            $appName = \"AnotherApp\";\r\n            break;\r\n        case \"site1.com\" :\r\n            $appName = \"Site1\";\r\n            break;\r\n        default: // mydefaultsite.com\r\n            $appName = \"Www\";\r\n    }\r\n    \r\n    (new Voodoo\\Core\\Application(APP_ROOT_DIR, $appName))->doVoodoo();\r\n\r\nSo now you have a multi-sites application. Ayibobo!\r\n\r\n---\r\n\r\n## Smart Routing & Application Execution\r\n\r\nVoodoo cleverly routes to the right module of the application by using the URL schema\r\n\r\n\t\tsite.com/Module/Controller/Action/Segments/?paramName=paramValue\r\n\r\n* Module: The container of the MVC application\r\n\r\n* Controller: A class accepting the user request\r\n\r\n* Action: A method of the controller's class\r\n\r\n* Segments: extra parameters that are passed in the action\r\n\r\n* ParamName/ParamValue : Parameters from the query url\r\n\r\n### How does Voodoo excute your application?\r\n\r\nThe very first thing Voodoo requires is an App name. The app name contains all the modules for the application. This is set in the front-controller.\r\n\r\nThen it checks for the **Module**, if found, it accesses the directory\r\n\r\nThen checks the **Controller**, which is a class, if exists it loads it\r\n\r\nThen checks the **Action**, a method in the Controller. If exists it executed the method\r\n\r\nBut if the Action doesn't exist, it will fall back to the *Controller::actionIndex()* method\r\n\r\nIf Controller doesn't exist, it will fall back to the *Index.php* controller\r\n\r\nIf Module doesn't exist, it will fall back to *Main* module\r\n\r\n\r\n### Application Routes (Customed Routes)\r\n\r\nSometimes, you may want to change the way the URL is displayed. Maybe because of SEO purposes, or something has changed, or whatever... you will have to alter the routes in the application config fille at: /App/$AppName/Config.ini\r\n\r\nEach application contains a `Config.ini` file. It is loaded by `Voodoo\\Core\\Application` upon initialization, and contains the necessary settings such as which controller to load by default, the views settings etc. It also contains your application's routes. \r\n\r\nIf you open /App/Www/Config.ini, look for the routes key, and you should fine something that looks like this: \r\n \r\n/App/Www/Config.ini\r\n\r\n\t[routes]\r\n\t    path[\"(:any)\"] = \"$1\"\r\n\r\nIt, by default, uses the basic route schema\r\n\r\n\tsite.com/Module/Controller/Action/Segments/?paramName=paramValue\r\n\r\nLet's say you have this url path:\r\n\r\n\tsite.com/users/profile/info/mardix\r\n\r\n- users = module\r\n- profile = controller\r\n- info = action\r\n- mardix = segment\r\n\r\nBut you want to short it to: `site.com/profile/mardix`\r\n\r\nYou can create a new route path in your Config.ini file like this\r\n\r\n\t[routes]\r\n\t\tpath[\"/profile/(:any)\"] = \"/Users/Profile/Info/$1\"\r\n\t\tpath[\"(:any)\"] = \"$1\"\r\n\r\nNow when someoneone enters `site.com/profile/mardix` , the application will be re-routed to `/Users/Profile/Info/mardix`.\r\n\r\nYou can add as many routes as you want. Also, the routes can have as many directives as you want and they support regex for more advanced matching.\r\n\r\n\t[routes]\r\n\t\tpath[\"/profile/(:any)\"] = \"/Users/Profile/Info/$1\"\r\n\t\tpath[\"/music/([rap|techno|compas]+)/(:num)\"] = \"/Music/Selection/genre/$1/song/$2\"\r\n\t\tpath[\"/blog/(:alphanum)/(:num)/(:any)\"] = \"Main/Blog/Category/$1/post/$2/$3/\"\r\n\t\tpath[\"(:any)\"] = \"$1\"\r\n\r\nThe /music route: site.com/music/rap/1526 -> /Music/Selection/genre/{rap}/song/{1526}\r\n\t\r\n\tMusic = module\r\n\tSelection = controller\r\n\tgenre = action\r\n\trap = segement #1, accessed in the controller $this->getSegment(1)\r\n\tsong = segement #2, accessed in the controller $this->getSegment(2)\r\n\t1526 = segement #3, accessed in the controller $this->getSegment(3)\r\n\t\t\r\n\r\n#### Stuff to understand about routes:\r\n\r\n- To reduce overhead, Application's routes are run before the call to any MVC application\r\n\r\n- Re-routing is not a redirect. It routes a path to a new path without changing the URL in the address bar\r\n\r\n- Voodoo routes are case incensitive. So accessing */Profile/info/mardix* and */pRofile/inFo/mardix* will result to the same place\r\n\r\n- Only alphanumeric [AZ-09] characters are accepted. All the other one will be ignored when routing. So */pro-file/info/mardix* will still result to */Profile/Info/mardix/*. Same as */about-us/* which result to */aboutus/*. So you can cleverly write your SEO friendly url and still keep your application running with no headache.\r\n\r\n\r\n*It is important to understand that routes are matched in the order they are added, and as soon as a URL matches a route, routing is essentially \"stopped\" and the remaining routes are never tried. Because the default route matches almost anything, including an empty url, new routes must be place before it.*\r\n\r\n\t[routes]\r\n\t\tpath[/article/(:num)] = \"/Blog/Article/Read/$1\"\r\n\t\tpath[\"/profile/(:any)\"] = \"/Main/Profile/Info/$1\"\r\n\t\tpath[\"(:any)\"] = \"$1\"\r\n\r\n---\r\n\r\nNow you see how Voodoo works with Front-Controller and Routes, let's get in the sauce of the meat. Ayibobo!\r\n\r\n---\r\n\r\n## Model-View-Controller\r\n\r\nAs you already notice above, your MVC application will reside under an $AppName and a $ModuleName.\r\n\r\n- Models: `App\\$AppName\\$ModuleName\\Model`\r\n\r\n- Controllers: `App\\$AppName\\$ModuleName\\Controller`\r\n\r\n- Views: `App/$AppName/$ModuleName/Views`\r\n\r\n\r\nLet's say we are using the `Www` application and the `Main` module.\r\n\r\n\r\n**Controller**\r\n\r\nAll controllers will reside under the namespace: `App\\Www\\Main\\Controller`\r\n\r\nApp/Www/Main/Controller/Index.php\r\n\r\n\t<?php\r\n\r\n\tnamespace App\\Www\\Main\\Controller;\r\n\r\n\tuse Voodoo;\r\n\r\n\tclass Index extends BaseController\r\n\t{\r\n\r\n\t    public function actionIndex()\r\n\t    {\r\n\t\t\t$this->view()->setPagetTitle(\"Hello World\");\r\n\t    }\r\n\r\n\r\n\t    public function actionAboutUs()\r\n\t    {\r\n\r\n\t    }\r\n\t\t//...\r\n\r\n\t}\r\n\r\nAll controllers are extended by `BaseController` which is extended by `Voodoo\\Core\\Controller` which contains the methods needed to get params, load views, get models, etc... BaseController is set so you can share functionnalities with other controllers\r\n\r\n**Views**\r\n\r\nAll views a placed at: `App/Www/Main/Views`\r\n\r\nViews, by default, are HTML template files. Based on the separation of concerns principle, the views role are to display data. No logic whatsoevet. To accomplish that, Voodoo uses *[Mustache.php](https://github.com/bobthecow/mustache.php/tree/cd6bfaefd30e13082780b3711c2aa4b92d146b1e)* as the template engine to render HTML. \r\n\r\nOther engines, such as Twig can be used instead of Mustache. \r\n\r\nBut if you are thinking about using PHP as template system itself, like  `<title><?= $this->title; ?></title>` , well my friend, I'm not sure Voodoo is the right tool for you. Anyway...\r\n\r\nThat's how a template file looks like with mustache template:\r\n\r\n\t<html>\r\n\t\t<head>\r\n\t\t\t<title>{{this.title}}</title>\r\n\t\t</head>\r\n\r\n\t\t<body>\r\n\t\t\t<ul>\r\n\t\t\t\t{{#articles}}\r\n\t\t\t\t\t<li>{title}</li>\r\n\t\t\t\t{{/articles}}\r\n\t\t\t</ul>\r\n\t\t</body>\r\n\t</html>\r\n\r\n\r\n\r\n**Model**\r\n\r\nBy default, all models based on our app.json will reside under the namespace: `App\\Www\\Main\\Model`\r\n\r\nAlso by default, Voodoo uses [VoodOrm](https://github.com/mardix/VoodOrm), a micro-ORM which functions as both a fluent select query API and a CRUD model class. It is extended in `\\Voodoo\\Core\\Model`.\r\n\r\nWhen models are created in the app.json for example\r\n\r\n\t{\r\n\t\t...\r\n\r\n        \"models\" : [\r\n            {\r\n                \"name\" : \"User\",\r\n                \"dbAlias\" : \"MyDB\",\r\n                \"table\" : \"user\",\r\n                \"primaryKey\" : \"id\",\r\n                \"foreignKey\" : \"%s_id\"\r\n            }\r\n        ]\r\n\t\t...\r\n\t}\r\n\r\n\r\n- **name**: the class name\r\n\r\n- **dbAlias** : the db alias name. We'll get back on it a little down.\r\n\r\n- **table** : the table name to associate with this class\r\n\r\n- **primaryKey** : the table primary key\r\n\r\n- **foreignKey** : the foreign key\r\n\r\nWhen the model is created, these settings will be added in the class so it can connect to the DB via PDO\r\n\r\n\r\n**/App/Cong/DB.ini** and **dbAlias** \r\n\r\nVoodoo requires that you store your DB settings (dbname, username, password, host) in `/App/Conf/DB.ini` . Each settings is associated to an alias. \r\n\r\nDatabase connections are managed by  `Voodoo\\Core\\ConnectionManager()` which makes sure the connection is connected once per alias, even if it's called 20 billions times (I hope not, lol). \r\n\r\nThis is how the /App/Conf/DB.ini looks like:\r\n\r\n\t[MyDB] \r\n\t    type       = \"mysql\"\r\n\t    host       = \"localhost\" \r\n\t    port       = 3306\r\n\t    user       = \"root\" \r\n\t    password   = \"my_password\" \r\n\t    dbname     = \"my_db_name\"  \r\n\r\nWhere `MyDB` is the alias name. \r\n\r\nSo in the app.json `\"dbAlias\" : \"MyDB\"` refers to the the above settings, and the ConnectionManager will use it to connect to the DB.\r\n\r\nSo having the dbAlias, allows you to have your settings in one place, and if you change anything in it, like host or dbName, all the classes that use `MyDB` will still work fine. \r\n\r\nBy extending the model to `Voodoo\\Core\\Model`  the connection is cleverly handled by Voodoo, you don't need to do jack. \r\n\r\nSo once our App/Conf/app.json is ran by App/voodooist.php you should have a model class similar to this:\r\n\r\n/App/Www/Main/Model/User.php\r\n\r\n\t<?php\r\n\r\n\tnamespace App\\Www\\Main\\Model;\r\n\r\n\tuse Voodoo;\r\n\r\n\tclass User extends Voodoo\\Core\\Model\r\n\t{\r\n\t    protected $tableName = \"user\";\r\n\r\n\t    protected $primaryKeyName = \"id\";\r\n\r\n\t    protected $foreignKeyName = \"%s_id\";\r\n\r\n\t    protected $dbAlias = \"MyDB\";\r\n\r\n\t}\r\n\r\nSince Voodoo uses VoodOrm, so automatically we can use all of VoodOrm methods like, `App\\Www\\Main\\Model\\User::find()`, `App\\Www\\Main\\Model\\User::count()` etc...\r\n\r\nAs you can see, Voodoo avoids mixing database calls, HTML tags and business logic in the same script. That is why we separate each part of our application, and this practice is called Separation of Concerns.\r\n\r\n---\r\n\r\n\r\n## First Voodoo App\r\n\r\nNow that you have learned how Voodoo works, let's create a simple application: Hello World at the path: `site.com/hello-world/` and `site.com/articles`\r\n\r\nTo do so, we will use Voodooist to setup our files.\r\n\r\nEdit the file: `App/Conf/app.json `\r\n\r\n\t{\r\n\t    \"createPublicAssets\" : true,\r\n\t    \"applications\" : [\r\n\t        {\r\n\t            \"name\" : \"www\",\r\n\t            \"modules\" : [\r\n\t                {\r\n\t                    \"name\" : \"Main\",\r\n\t                    \"template\" : \"Default\",\r\n\t                    \"isApi\" : false,\r\n\t                    \"omitViews\" : false,\r\n\r\n\t                    \"controllers\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Index\",\r\n\t                            \"actions\" : [\"index\", \"hello-world\", \"articles\"]\r\n\t                        }\r\n\t                    ],\r\n\r\n\t                    \"models\" : [\r\n\t                        {\r\n\t                            \"name\" : \"Articles\",\r\n\t                            \"dbAlias\" : \"MyDB\",\r\n\t                            \"table\" : \"articles\",\r\n\t                            \"primaryKey\" : \"id\",\r\n\t                            \"foreignKey\" : \"%s_id\"\r\n\t                        }\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        }\r\n\t    ]\r\n\t}\r\n\r\n\r\nRun this below\r\n\r\n\t\tcd /App\r\n \t\tphp ./voodooist.php\r\n\r\n\r\nAnd you should get the following filesystem:\r\n\r\n\r\n\t|\r\n\t+-- App/\r\n\t\t|\r\n\t\t+-- .htaccess\r\n\t\t|\r\n\t\t+-- Www\r\n\t\t\t|\r\n\t\t\t+-- Config.ini\r\n\t\t\t|\r\n\t\t\t+-- Main\r\n\t\t\t\t|\r\n\t\t\t\t+-- Controller/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index.php\r\n\t\t\t\t\t\t\t::actionIndex()\r\n\t\t\t\t\t\t\t::actionHelloWorld()\r\n\t\t\t\t\t\t\t::actionArticles()\r\n\t\t\t\t|\r\n\t\t\t\t+-- View/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- Index/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Index.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- HelloWorld.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- Articles.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _assets/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- js/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- css/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- img/\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _includes/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- flash-message.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- pagination.html\r\n\t\t\t\t\t|\r\n\t\t\t\t\t+-- _layouts/\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- default.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- head-tag.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- footer.html\r\n\t\t\t\t\t\t|\r\n\t\t\t\t\t\t+-- header.html\r\n\t|\r\n\t+-- assets/ [+]\r\n\t|\r\n\t+-- vendor/ [+]\r\n\t|\r\n\t+-- index.php\r\n\t|\r\n\t+-- .htaccess\r\n\r\n\r\nApp/Www/Main/Controller/Index.php\r\n\r\n\r\n\t<?php\r\n\r\n\tnamespace App\\Www\\Main\\Controller;\r\n\r\n\tuse App\\Ww\\Main\\Model;\r\n\r\n\tclass Index extends BaseController\r\n\t{\r\n\r\n\t\t/**\r\n\t\t * The default action.\r\n\t\t **/\r\n\t\tpublic function actionIndex(){\r\n\t\t\t$this->view()->setPageTitle(\"Welcome to my Site\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* @action hello-world\r\n\t\t*/\r\n\t\tpublic function actionHelloWorld(){\r\n\t\t\t$this->view()->setPageTitle(\"Hello World\");\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t* @action articles\r\n\t\t*/\r\n\t\tpublic function actionArticles(){\r\n\r\n\t\t\t$this->view()->setPageTitle(\"Latest Articles\");\r\n\r\n\t\t\t$articles = (new Model\\Articles)->find();\r\n\r\n\t\t\t$articlesData = [];\r\n\t\t\tforeach ($articles as $article) {\r\n\t\t\t\t$articlesData[] = [\r\n\t\t\t\t\t\"id\" => $article->getPK(),\r\n\t\t\t\t\t\"title\" => $article->title,\r\n\t\t\t\t\t\"date\" => $this->formatDate($article->published_date)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\t$this->view()->assign(\"articles\", $articlesData);\r\n\t\t}\r\n\r\n\t}\r\n\r\nApp/Www/Main/Model/Articles.php\r\n\r\n\t<?php\r\n\r\n\tnamespace App\\Www\\Main\\Model;\r\n\r\n\tuse Voodoo;\r\n\r\n\tclass Articles extends Voodoo\\Core\\Model\r\n\t{\r\n\r\n\t    protected $tableName = \"articles\";\r\n\r\n\t    protected $primaryKeyName = \"id\";\r\n\r\n\t    protected $foreignKeyName = \"%s_id\";\r\n\r\n\t    protected $dbAlias = \"MyDB\";\r\n\r\n\t}\r\n\r\n\r\n\r\n#### Create the Views:\r\n\r\n\r\n\r\nApp/Www/Main/Views/Index/Index.html\r\n\r\n\t<div>\r\n\t\t<h3>Welcome to my site</h3>\r\n\r\n\t\tBlah blah blah\r\n\t</div>\r\n\r\n\r\nApp/Www/Main/Views/Index/HelloWorld.html\r\n\r\n\t<div>\r\n\t\t<h3>Hello World</h3>\r\n\r\n\t\tBlah blah blah\r\n\t</div>\r\n\r\n\r\n\r\nApp/Www/Main/Views/Index/Articles.html\r\n\r\n\t<div>\r\n\t\t<h3>Latest Articles</h3>\r\n\r\n\t\t<ul>\r\n\t\t\t{{#articles}}\r\n\t\t\t\t<li><a href='{{this.controller.url}}/read/{{id}}'>{{title}}</a></li>\r\n\t\t\t{{/articles}}\r\n\t\t</ul>\r\n\r\n\t</div>\r\n\r\n\r\n\r\n**App/Www/Main/Views/_layout/default.html**\r\n\r\nVoodoo requires a container template file. The container is a place holder for the action's view. The container may contain  header, footer, sidebar etc.. but must include the tag below to include the action's view page\r\n\r\n\t\t{{%include @actionView}}\r\n\r\nTechnically, the container is the layout of your application, and your action files are files to be included in the layout.\r\n\r\nSo let's create the container. It is placed at:\r\n\r\n/App/Www/Main/Views/_layout/default.html\r\n\r\n\t<html>\r\n\t\t<head>\r\n\t\t\t<title>{{this.title}}</title>\r\n\t\t</head>\r\n\r\n\t\t<body>\r\n\t\t\t{{%include _layouts/header}}\r\n\r\n\t\t\t\t{{%include @actionView}}\r\n\r\n\t\t\t{{%include _layouts/footer}}\r\n\t\t</body>\r\n\t</html>\r\n\r\n\r\n\r\nNow everything is setup and ready to go.\r\n\r\nIf someone accesses `site.com/articles/`, he/she will see the list of all articles.\r\n\r\n---\r\n\r\nThat's pretty much it.\r\n\r\nGo to [VoodooPHP.org](http://voodoophp.org) for a more in depth documentation.\r\n\r\n---\r\n\r\nVoodooPHP was created by Mardix and released under the MIT License.\r\n\r\nEnjoy!\r\n\r\n(c) This Year  Mardix\r\n\r\n(oof! that was a lot of writing, June 9 2013)\r\n\r\n---\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}